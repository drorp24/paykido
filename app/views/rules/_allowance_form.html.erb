<%= simple_form_for rule, :html => {:class => 'form-inline', :id => 'rule_form'} do |f| %>
  <%= f.error_notification %>

	<div class="form-inputs rule_form">
	    <%= f.hidden_field :consumer_id, :value => @consumer.id %>
	    <%= f.hidden_field :property, :value => "_allowance" %>
	    <%= f.hidden_field :previous_rule_id, :value => @rule.previous_rule_id %>
	    <div class="input-prepend input-append rule_value_wrapper">
		    <span class="add-on"><%= t "number.currency.format.unit" %></span>
		    <%= f.input :value, :label => false, :input_html => {:class => 'numeric rule_value'}, :autofocus => true %>
		    <span class="add-on">.00</span>
	    </div>
	    <%= f.input :period, :label => false, :collection => Rule.periods, :include_blank => false, :input_html => {:class => 'rule_period'} %>
	    <%= f.input :weekly_occurrence, :label => "every", :wrapper_html => {:class => "weekly_allowance"}, :input_html => {:class => 'rule_occurrence'}, :collection => Rule.weekly_recurrence, :selected => rule.weekly_occurrence, :include_blank => false %>
	    <%= f.input :monthly_occurrence, :label => "every", :wrapper_html => {:class => "monthly_allowance"}, :input_html => {:class => 'rule_occurrence'}, :collection => Rule.monthly_recurrence, :selected => rule.monthly_occurrence, :include_blank => false %>
		<%= f.button :submit, "Activate Rule", :class => "btn-primary", :id => "modal_submit" %>
	</div>
	
<% end %>


<script>
$(document).ready(function () {

	$('select#rule_period').each (function () {
		replace_occurrence($(this))
	});

	$('select#rule_period').change (function () {
		replace_occurrence($(this))
	});

	function replace_occurrence(period_selection) {
		if ($(period_selection).val() == 'Weekly') {
			$(period_selection).parents('.rule_form').find('.weekly_allowance').show();
//			$(period_selection).parents('.rule_form').find('#rule_monthly_occurrence').empty();
			$(period_selection).parents('.rule_form').find('.monthly_allowance').hide();
		} else {
			$(period_selection).parents('.rule_form').find('.monthly_allowance').show();
//			$(period_selection).parents('.rule_form').find('#rule_weekly_occurrence').empty();
			$(period_selection).parents('.rule_form').find('.weekly_allowance').hide();
		}
		
	}	

})
</script>
