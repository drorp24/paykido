<%= simple_form_for rule, :html => {:class => 'form-inline'} do |f| %>
  <%= f.error_notification %>

  	<div class="form-inputs rule_form">
	    <div class="input-prepend input-append span2 offset25 rule_value_wrapper">
		    <span class="add-on"><%= t "number.currency.format.unit" %></span>
		    	<%= f.input :value, :label => false, :input_html => {:class => 'numeric rule_value'}, :autofocus => true %>
		    <span class="add-on">.00</span>
	    </div>
	    <%= f.input :period, :label => false, :collection => Rule.periods, :input_html => {:class => 'rule_period span1'} %>
	    <%= f.input :occurrence, :label => "on", :wrapper_html => {:class => "weekly_allowance"}, :input_html => {:class => 'rule_occurrence span1'}, :collection => Rule.weekly_recurrence %>
	    <%= f.input :occurrence, :label => "on", :wrapper_html => {:class => "monthly_allowance"}, :input_html => {:class => 'rule_occurrence span1'}, :collection => Rule.monthly_recurrence %>
    	<%= f.button :submit, :class => "inline-submit"%>
  	</div>

<% end %>
<script>
$(document).ready(function () {

	$('select#rule_period').each (function () {
		if ($(this).val() == 'Weekly') {
			$(this).parents('.rule_form').find('.weekly_allowance').show();
			$(this).parents('.rule_form').find('.monthly_allowance').hide();
		} else {
			$(this).parents('.rule_form').find('.monthly_allowance').show();
			$(this).parents('.rule_form').find('.weekly_allowance').hide();
		}
	});

	$('select#rule_period').change (function () {
		if ($(this).val() == 'Weekly') {
			$(this).parents('.rule_form').find('.weekly_allowance').show();
			$(this).parents('.rule_form').find('.monthly_allowance').hide();
		} else {
			$(this).parents('.rule_form').find('.monthly_allowance').show();
			$(this).parents('.rule_form').find('.weekly_allowance').hide();
		}
	});
})
</script>
